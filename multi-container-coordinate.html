<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="multi-base-behavior.html">
<link rel="import" href="multi-shape-bar.html">
<link rel="import" href="multi-shape-line.html">
<link rel="import" href="multi-color-behavior.html">
<link rel="import" href="multi-selector-behavior.html">
<link rel="import" href="multi-axis.html">
<link rel="import" href="multi-scale.html">
<link rel="import" href="multi-accessor.html">
<link rel="import" href="multi-shared-styles.html">
<!-- <link rel="import" href="multi-axis-behaviors.html"> -->
<!--
`multi-poly`
polymer elements for multivariate analysis (depend on crossfilter, universe and reductio)

@demo demo/index.html 
-->
<dom-module id="multi-container-coordinate">
  <template>
    <style is="custom-style" include="multi-container multi-chart-selector">

    </style>
    <!-- Polymer has problem with handling namespace (https://github.com/Polymer/polymer/pull/3372): multi-axis is outside SVG -->
    <multi-axis anchor="axisGroup" accessor="[[xAccessor]]" elastic="[[xElastic]]" text="[[xAxisText]]" ref="xAxis" width="[[chartWidth]]" height="[[chartHeight]]" family="{{xScaleFamily}}" scale="{{xScale}}" scale-type="scaleBand" padding="0.1" domain="{{xDomain}}" range="[[xRange]]"></multi-axis>
    <multi-axis anchor="axisGroup" domain-min="0" accessor="[[yAccessor]]" elastic="[[yElastic]]" text="[[yAxisText]]" ref="yAxis" width="[[chartWidth]]" height="[[chartHeight]]" position="left" domain="{{yDomain}}" range="[[yRange]]" scale="{{yScale}}"></multi-axis>
    <multi-scale scale-type="scaleOrdinal" range="[[colorRange]]" scale="{{colorScale}}"></multi-scale>
    <multi-scale scale-type="scaleLinear" range="[[xRange]]" domain="[[xDomain]]" scale="{{xScaleContinuous}}"></multi-scale>
    <content></content>
    <svg id="svg">
      <g id="chartContent" transform$="[[translate(margin.left, margin.top)]]">
        <g id="chart" class="chart">
        </g>
        <g id="axisGroup"></g>
        <g id="brush" class="brush"></g>
      </g>
    </svg>
  </template>
  <script>
  Polymer({

    is: 'multi-container-coordinate',

    hostAttributes: {
      multicontainer: ''
    },

    properties: {

      /**
       * `chartInsertionPoint` the id for anchoring contents - as Polymer does not support external namespaces, we cheat with the way SVG nodes are inserted into this component. (see [multi-lifecycle-behavior.html]())
       */
      chartInsertionPoint: {
        type: String,
        value: 'chart'
      },

      selectionType: {
        type: String,
        value: 'brushX'
      },

      xElastic: {
        type: Boolean,
        value: false
      },

      yElastic: {
        type: Boolean,
        value: true
      },

      yAxisText: {
        type: String
      },

      xAxisText: {
        type: String
      },

      xAccessor: {
        type: Function,
      },

      yAccessor: {
        type: Function,
      },

      xScale: {
        type: Function,
        notify: true
      },

      yScale: {
        type: Function,
        notify: true
      },

      colorScale: {
        type: Function,
        notify: true
      }

    },

    behaviors: [
      Polymer.multi.base,
      Polymer.multi.color,
      Polymer.multi.selector
    ]

  });
  </script>
</dom-module>
