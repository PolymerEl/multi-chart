<link rel="import" href="../../iron-resizable-behavior/iron-resizable-behavior.html">
<script>
(function(){
	
	/**
	 * ##  Resizable
	 * 
	 * handles size and resizing
	 * 
	 * @memberof MultiChart.mixin
   * @polymer
   * @mixinFunction
   */
	const Resizable = Polymer.dedupingMixin( superClass =>  {
	  
	  /*
	   * @polymer
	   * @mixinClass
	   */
	  class Mixin extends Polymer.mixinBehaviors([Polymer.IronResizableBehavior],superClass) {
	    
	    static get properties() {
	      return {
	      	/* 
	      	 * `width`  of SVG host
	      	 */
	        width: {
	          type: Number,
	          readOnly: true
	        },

	        /* 
	      	 * `height` of SVG host
	      	 */
	        height: {
	          type: Number,
	          readOnly: true
	        },

	        center: {
	        	type: Array, 
	        	computed: '_computeCenter(width, height)'
	        },

	        minSize: {
	        	type: Number, 
	        	computed: '_computeMinSize(width, height)'
	        }
	      };
	    }

	    static get observers() {
	      return [];
	    }

	    get container() {
	    	return this.svgHost || null;
	    }

	    get containerWidth() {
	    	return this.container && this.container.width;
	    }

	    get containerHeight() {
	    	return this.container && this.container.height;
	    }

		  connectedCallback() {
		    super.connectedCallback();
		    Polymer.RenderStatus.afterNextRender(this, () => {
		    	this.onResize();
		    });
		  }

		  onResize(e) {
		  	this._setWidth(this.containerWidth);
		  	this._setHeight(this.containerHeight);
		  }

		  _computeCenter(width, height) {
		  	return [width / 2 || 0, height / 2 || 0];
		  }

		  _computeMinSize(width, height) {
		  	if(width && height) {
		  		return Math.min(width, height);
		  	}
		  	return null;
		  }
	    
	  }

		return Mixin;	  
	});

	if (!window.MultiChart) {
	 window.MultiChart = {};
	}

	/* 
	 * @namespace MultiChart.mixin
	 */
	window.MultiChart.mixin = window.MultiChart.mixin || {};
	/*
	 * @mixinClass
	 */
  window.MultiChart.mixin.Resizable = Resizable;
    
	})();	
</script>