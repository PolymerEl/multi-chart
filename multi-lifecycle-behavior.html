<link rel="import" href="../polymer/polymer.html">
<script>
/**
 * `isDraw` behavior allow element to notify host than they exist. For instance an active `multi-axis` will notify its main chart that it exists and that changes in data must be reflected for this axis as well (calling the draw method)
 */
(function() {
  'use strict';


  var B = Polymer.multi = Polymer.multi || {};

  B.lifecycle = {

    properties: {

      /**
       * `isActive` set to false to inactivate this component. It will remove visual elements and inactivate its functionality.
       */
      isActive: {
        type: Boolean,
        value: true,
        observer: '__observeIsActive'
      },

      /**
       * `shallRegister` is a flag to know if this element need to be registered when it is added to a chart-container
       */
      shallRegister: {
        type: Boolean,
        value: true
      },

      /**
       * @required
       * `hostAnchor` the id of a host element under which this element will be appended (in `afterRegister` method).
.       */
      anchor: {
        type: String
      },

      /**
       * `isDrawn` flag to know if this element is drawn. 
       */
      isDrawn: {
        type:Boolean,
        readOnly: true 
      }, 

    },

    // attached: function() {
    //   if (this.isActive) {
    //     this.fire('multi-register-item', true);
    //   }
    // },

    get targetElement() {
       this._error('targetElement getter must be overridden');
      // return this.$.chart;
    },

    detached: function() {
      // this.fire('multi-register-item', false);
      this.appendChild(this.targetElement);
    },

    __observeIsActive: function(isActive) {
      // this.fire('multi-register-register', isActive);
      if (!isActive) {
        this.remove();
      }
    },

    /**
     * `afterRegister` is called by the host once this element has been registered. It placed the axis element into the chart. 
     */
    afterRegister: function(host) {
      if (!this.anchor && !host.chartInsertionPoint) {
        this._error('insertionPoint is missing. specify either and anchor or a chartInsertionPoint.');
      }
      if (this.targetElement) {
        host.$[this.anchor || host.chartInsertionPoint].appendChild(this.targetElement);
      }
    },

    draw: function() {
    },

    remove: function() {
      if (this.targetElement) {
        d3.select(this.targetElement).selectAll('*').remove();
      }
    }

  };

})();
</script>
