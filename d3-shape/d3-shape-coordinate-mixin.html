<script>
(function() {

  /**
   * ##  D3ShapeCoordinate
   * 
   * Coordinate properties (x and y)
   * 
   * @memberof MultiChart.mixin
   * @polymer
   * @mixinFunction
   */
  const D3ShapeCoordinate = superClass => {

    return class extends superClass {

      static get properties() {
        return {
          /**
           * `x` the x accessor to be applied to the line generator
           */
          x: {
            type: Function,
            readOnly: true
          },

          /* 
           * `xAccessor`  the accessor function for x data
           */
          xAccessor: {
            type: Function
          },

          /* 
           * `xScale`  scale function for x domain
           */
          xScale: {
            type: Function
          },

          /**
           * `y` the y accessor to be applied to the line generator
           */
          y: {
            type: Function,
            readOnly: true
          },

          /* 
           * `yAccessor`  the accessor function for y data
           */
          yAccessor: {
            type: Function
          },

          /* 
           * `yScale`  scale function for y domain
           */
          yScale: {
            type: Function
          }
        };
      }

      static get observers() {
        return [
          '_observeScaleAccessor(xScale, xAccessor, "X")',
          '_observeScaleAccessor(yScale, yAccessor, "Y")',
        ];
      }

      _observeScaleAccessor(scale, accessor, name) {
        if (scale && accessor) {
          this[`_set${name}`](function(d, i) {
            return scale(accessor(d, i));
          });
          this.fire('multi-refresh');
        }
      }

    };
  };

  if (!window.MultiChart) {
    window.MultiChart = {};
  }

  /* 
   * @namespace MultiChart.mixin
   */
  window.MultiChart.mixin = window.MultiChart.mixin || {};
  /* 
   * @mixinFunction
   */
  window.MultiChart.mixin.D3ShapeCoordinate = D3ShapeCoordinate;

})();
</script>