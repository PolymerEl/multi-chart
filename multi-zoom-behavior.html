<link rel="import" href="../polymer/polymer.html">
<script>
/**
 * `multiZoom` behavior for handlin zoom
 *
 */

/** @polymerBehavior */
Polymer.multiZoom = {

  properties: {
    /* 
     * `enableZoom` set true to enable zoom behaviors
     */
    enableZoom: {
      type: Boolean,
      value: false,
      reflectToAttribute: true,
        observer: '__observeEnableZoom'
    },
    /* 
     * `transform` the transform Object applied to zoomed ELement 
     */
    transform: {
      type: Object,
      notify: true
    },


  },
  observers: [
    // '__observeEnableZoom(enableZoom)'
  ],

  get zoomedEl() {
    return d3.select(this.$.zoom);
  },

  __observeEnableZoom: function(enable, old) {
    if (enable) {
      var zoom = d3.zoom().on('zoom', zoomed);
      var zoomedEl = this.zoomedEl;

      d3.select(this.$.svg).call(zoom);
      var me = this;
      
      function zoomed() {
        me.transform = d3.event.transform;
        zoomedEl.attr('transform', me.transform);
      }
    }
    if (!enable && old) {
      // remove listner
      // d3.select(this.$.zoom)
    }

  }

};
</script>
