<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../multi-color-behavior.html">
<link rel="import" href="../shape/multi-shape-pie.html">
<link rel="import" href="../multi-scale.html">
<link rel="import" href="../multi-accessor.html">
<link rel="import" href="../multi-legend.html">
<link rel="import" href="../multi-container-simple.html">
<link rel="import" href="../multi-shared-styles.html">
<!-- <link rel="import" href="multi-axis-behaviors.html"> -->
<!--
`multi-poly`
polymer elements for multivariate analysis (depend on crossfilter, universe and reductio)

@demo demo/index.html 
-->
<dom-module id="multi-chart-pie">
  <template>
    <style is="custom-style" include="multi-chart multi-chart-selector">

    </style>
    <h2 class="title">[[title]]</h2>
    <h3 class="subtitle">[[subtitle]]</h3>
    <!-- <multi-accessor accessor="{{valueAccessor}}" path="[[valueAccessorPath]]"></multi-accessor> -->
    <multi-accessor accessor="{{keyAccessor}}" path="[[keyAccessorPath]]"></multi-accessor>
      
      <multi-container-simple 
      selection-type="[[selectionType]]" 
      selectedItems="[[selectedItems]]" 
      chart-height="{{_height}}" 
      chart-width="{{_width}}" 
      data="[[data]]" 
      >
      <multi-legend scale="[[colorScale]]"> </multi-legend>
      <multi-scale scale-type="scaleOrdinal" accessor="[[keyAccessor]]" range="[[colorRange]]" scale="{{colorScale}}"></multi-scale>
      <multi-shape-pie 
        height="[[_height]]" 
        width="[[_width]]" 
        pad-angle="[[padAngle]]" 
        inner-radius="[[innerRadius]]"
        value-path="[[valueAccessorPath]]" 
        color-accessor="[[keyAccessor]]" 
        color-scale="[[colorScale]]"></multi-shape-pie>
    </multi-container-simple>
  </template>
  <script>
  Polymer({

    is: 'multi-chart-pie',

    hostAttributes: {
      multichart: ''
    },

    properties: {

      selectionType: {
        type: String,
        value: 'select'
      },

      selectedItems: {
        type: Array,
        notify: true
      },

      valueAccessorPath: {
        type: String,
        value: '+value.count'
      },
      keyAccessorPath: {
        type: String,
        value: 'key'
      },

       /**
       * `colorRange` output range of colors to be used for calculating the colorScale
       */
      colorRange: {
        type: Array,
        value: function() {
          return d3.schemeCategory10;
        }
      },
    },

    behaviors: [
      // Polymer.multi.color
      // Polymer.multi.selector
    ]

  });
  </script>
</dom-module>
